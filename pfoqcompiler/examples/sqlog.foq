decl f(a,b){
    a[0] *= Ph[lambda x: pi/(2**x)](|a|);
    call f((a)^+,b);
    call g(a,b-[0]);}

decl g(a,b){
    qcase(a[|a|/2])of{
        0->call g((a)^-,b);,
        1->b[0]*=NOT;
    }
}
::
define q r;
::
call f(q,r);
