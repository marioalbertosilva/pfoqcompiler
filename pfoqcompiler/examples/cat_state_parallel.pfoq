decl cnots_par(a){
    if(|a|>2)then{ //recursive case
        CNOT(a[0],a[|(a)^-|]);
        call cnots_par((a)^-);
        call cnots_par((a)^+);
    }else{
    if(|a|>1)then{ //base case
    	CNOT(a[0],a[1]);
    }else{skip;}
} }
::
define q;
::
q[0]*=H;
call cnots_par(q);
